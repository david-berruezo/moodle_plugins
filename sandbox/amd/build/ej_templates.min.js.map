{"version":3,"file":"ej_templates.min.js","sources":["../src/ej_templates.js"],"sourcesContent":["/**\n * Ejercicio 3: core/templates\n *\n * @module     local_sandbox/ej_templates\n * @copyright  2026 Tu Nombre\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine(['core/templates', 'core/notification'], function(Templates, Notification) {\n    'use strict';\n\n    /**\n     * Initialise the templates exercise.\n     */\n    function init() {\n\n        // ---------------------------------------------------\n        // 1. Renderizar un template simple (greeting_card)\n        // ---------------------------------------------------\n\n        document.getElementById('btn-render-card').addEventListener('click', function() {\n\n            var name = document.getElementById('tpl-name').value;\n            var greeting = document.getElementById('tpl-greeting').value;\n\n            // El \"context\" es el objeto de datos que recibe el template Mustache\n            var context = {\n                name: name,\n                greeting: greeting,\n                timestamp: Math.floor(Date.now() / 1000),\n                cssclass: 'border-success'\n            };\n\n            // Templates.render(templateName, context) → Promise<string>\n            // templateName sigue el formato: componente/nombretemplate\n            Templates.render('local_sandbox/greeting_card', context)\n                .then(function(html) {\n                    // html es el string HTML renderizado\n                    document.getElementById('card-output').innerHTML = html;\n                    return html;\n                })\n                .catch(function(error) {\n                    Notification.exception(error);\n                });\n        });\n\n        // ---------------------------------------------------\n        // 2. Renderizar lista con datos (user_list)\n        // ---------------------------------------------------\n\n        document.getElementById('btn-render-list').addEventListener('click', function() {\n\n            var context = {\n                title: 'Development Team',\n                hasusers: true,\n                count: 3,\n                users: [\n                    { name: 'Alice García',   email: 'alice@example.com',   role: 'Admin' },\n                    { name: 'Bob Martínez',   email: 'bob@example.com',     role: 'Teacher' },\n                    { name: 'Carol López',    email: 'carol@example.com',   role: 'Student' }\n                ]\n            };\n\n            Templates.render('local_sandbox/user_list', context)\n                .then(function(html) {\n                    document.getElementById('list-output').innerHTML = html;\n                    return html;\n                })\n                .catch(function(error) {\n                    Notification.exception(error);\n                });\n        });\n\n        // ---------------------------------------------------\n        // 3. Renderizar lista vacía (para ver la sección {{^hasusers}})\n        // ---------------------------------------------------\n\n        document.getElementById('btn-render-empty').addEventListener('click', function() {\n\n            var context = {\n                title: 'Empty Team',\n                hasusers: false,\n                count: 0,\n                users: []\n            };\n\n            Templates.render('local_sandbox/user_list', context)\n                .then(function(html) {\n                    document.getElementById('list-output').innerHTML = html;\n                    return html;\n                })\n                .catch(function(error) {\n                    Notification.exception(error);\n                });\n        });\n\n        // ---------------------------------------------------\n        // 4. renderForPromise — devuelve {html, js}\n        //    Útil cuando el template contiene bloques {{#js}}\n        // ---------------------------------------------------\n\n        document.getElementById('btn-render-promise').addEventListener('click', function() {\n\n            var context = {\n                name: 'Tester',\n                greeting: 'This was rendered with renderForPromise!',\n                timestamp: Math.floor(Date.now() / 1000),\n                cssclass: 'border-info'\n            };\n\n            // renderForPromise devuelve un objeto {html: string, js: string}\n            Templates.renderForPromise('local_sandbox/greeting_card', context)\n                .then(function(result) {\n                    // result.html → el HTML renderizado\n                    // result.js  → el JS del template (si tiene {{#js}}...{{/js}})\n\n                    var output = document.getElementById('promise-output');\n                    output.innerHTML = result.html;\n\n                    // Ejecutar el JS del template (si lo hubiera)\n                    Templates.runTemplateJS(result.js);\n\n                    // Mostrar info en consola\n                    window.console.log('[ej_templates] HTML length:', result.html.length);\n                    window.console.log('[ej_templates] JS length:', result.js.length);\n\n                    return result;\n                })\n                .catch(function(error) {\n                    Notification.exception(error);\n                });\n        });\n\n        window.console.log('[ej_templates] Módulo inicializado correctamente.');\n    }\n\n    return {\n        init: init\n    };\n});"],"names":["define","Templates","Notification","init","document","getElementById","addEventListener","context","name","value","greeting","timestamp","Math","floor","Date","now","cssclass","render","then","html","innerHTML","catch","error","exception","title","hasusers","count","users","email","role","renderForPromise","result","runTemplateJS","js","window","console","log","length"],"mappings":";;;;;;;AAOAA,oCAAO,CAAC,iBAAkB,sBAAsB,SAASC,UAAWC,oBAgIzD,CACHC,gBArHAC,SAASC,eAAe,mBAAmBC,iBAAiB,SAAS,eAM7DC,QAAU,CACVC,KALOJ,SAASC,eAAe,YAAYI,MAM3CC,SALWN,SAASC,eAAe,gBAAgBI,MAMnDE,UAAWC,KAAKC,MAAMC,KAAKC,MAAQ,KACnCC,SAAU,kBAKdf,UAAUgB,OAAO,8BAA+BV,SAC3CW,MAAK,SAASC,aAEXf,SAASC,eAAe,eAAee,UAAYD,KAC5CA,QAEVE,OAAM,SAASC,OACZpB,aAAaqB,UAAUD,aAQnClB,SAASC,eAAe,mBAAmBC,iBAAiB,SAAS,WAajEL,UAAUgB,OAAO,0BAXH,CACVO,MAAO,mBACPC,UAAU,EACVC,MAAO,EACPC,MAAO,CACH,CAAEnB,KAAM,eAAkBoB,MAAO,oBAAuBC,KAAM,SAC9D,CAAErB,KAAM,eAAkBoB,MAAO,kBAAuBC,KAAM,WAC9D,CAAErB,KAAM,cAAkBoB,MAAO,oBAAuBC,KAAM,cAKjEX,MAAK,SAASC,aACXf,SAASC,eAAe,eAAee,UAAYD,KAC5CA,QAEVE,OAAM,SAASC,OACZpB,aAAaqB,UAAUD,aAQnClB,SAASC,eAAe,oBAAoBC,iBAAiB,SAAS,WASlEL,UAAUgB,OAAO,0BAPH,CACVO,MAAO,aACPC,UAAU,EACVC,MAAO,EACPC,MAAO,KAINT,MAAK,SAASC,aACXf,SAASC,eAAe,eAAee,UAAYD,KAC5CA,QAEVE,OAAM,SAASC,OACZpB,aAAaqB,UAAUD,aASnClB,SAASC,eAAe,sBAAsBC,iBAAiB,SAAS,eAEhEC,QAAU,CACVC,KAAM,SACNE,SAAU,2CACVC,UAAWC,KAAKC,MAAMC,KAAKC,MAAQ,KACnCC,SAAU,eAIdf,UAAU6B,iBAAiB,8BAA+BvB,SACrDW,MAAK,SAASa,eAIE3B,SAASC,eAAe,kBAC9Be,UAAYW,OAAOZ,KAG1BlB,UAAU+B,cAAcD,OAAOE,IAG/BC,OAAOC,QAAQC,IAAI,8BAA+BL,OAAOZ,KAAKkB,QAC9DH,OAAOC,QAAQC,IAAI,4BAA6BL,OAAOE,GAAGI,QAEnDN,UAEVV,OAAM,SAASC,OACZpB,aAAaqB,UAAUD,aAInCY,OAAOC,QAAQC,IAAI"}