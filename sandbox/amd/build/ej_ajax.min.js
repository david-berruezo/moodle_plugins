/**
 * Ejercicio 2: core/ajax
 *
 * @module     local_sandbox/ej_ajax
 * @copyright  2026 Tu Nombre
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("local_sandbox/ej_ajax",["core/ajax","core/notification"],(function(Ajax,Notification){return{init:function(){document.getElementById("btn-call-ws").addEventListener("click",(function(){var name=document.getElementById("input-name").value,timeofday=document.getElementById("select-time").value;Ajax.call([{methodname:"local_sandbox_get_greeting",args:{name:name,timeofday:timeofday}}])[0].then((function(response){var resultDiv=document.getElementById("ws-result");return resultDiv.style.display="block",resultDiv.className="mt-3 alert alert-success",resultDiv.innerHTML="<strong>Respuesta del servidor:</strong><br>Greeting: "+response.greeting+"<br>Timestamp: "+response.timestamp+"<br>Lang: "+response.lang,window.console.log("[ej_ajax] Respuesta:",response),response})).catch((function(error){Notification.exception(error)}))})),document.getElementById("btn-call-batch").addEventListener("click",(function(){var promises=Ajax.call([{methodname:"local_sandbox_get_greeting",args:{name:"Alice",timeofday:"morning"}},{methodname:"local_sandbox_get_greeting",args:{name:"Bob",timeofday:"afternoon"}},{methodname:"local_sandbox_get_greeting",args:{name:"Charlie",timeofday:"evening"}}]);Promise.all(promises).then((function(results){var resultDiv=document.getElementById("batch-result");resultDiv.style.display="block",resultDiv.className="mt-3 alert alert-info";var html="<strong>Resultados del batch (3 llamadas, 1 petición HTTP):</strong><br>";return results.forEach((function(r,index){html+=index+1+". "+r.greeting+"<br>"})),resultDiv.innerHTML=html,results})).catch((function(error){Notification.exception(error)}))})),document.getElementById("btn-call-error").addEventListener("click",(function(){Ajax.call([{methodname:"local_sandbox_funcion_que_no_existe",args:{}}])[0].then((function(response){return window.console.log("Respuesta inesperada:",response),response})).catch((function(error){Notification.exception(error);var resultDiv=document.getElementById("error-result");resultDiv.style.display="block",resultDiv.className="mt-3 alert alert-danger",resultDiv.innerHTML="<strong>Error capturado:</strong><br>Mensaje: "+error.message+"<br>Error code: "+(error.errorcode||"N/A")}))})),window.console.log("[ej_ajax] Módulo inicializado correctamente.")}}}));

//# sourceMappingURL=ej_ajax.min.js.map